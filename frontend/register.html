<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz - Register</title>

  <!-- Font Awesome -->
  <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
  />

  <!-- Bootstrap -->
  <link
          rel="stylesheet"
          href="assets/dist/framework/bootstrap/css/bootstrap.min.css"
  />

  <!-- Theme Files -->
  <link rel="stylesheet" href="assets/dist/theme/css/color.css" />
  <link rel="stylesheet" href="assets/dist/theme/css/theme.css" />
  <link rel="stylesheet" href="assets/dist/theme/css/responsive.css" />
  <link rel="stylesheet" href="assets/dist/theme/css/animation.css" />
</head>
<body>
<div class="quiz">
  <header>
    <div class="logo">
      <img src="assets/images/icon.png" alt="Icon" />Ayush - Quiz App<span>.</span>
    </div>
  </header>

  <div
          class="container flex-grow-1 d-flex flex-column align-items-center justify-content-center"
  >
    <div class="row">
      <div class="col-md-7 tab-100">
        <h1 class="mainHeading">
          Create your <strong>Account Now!</strong>
        </h1>
        <img class="mt-4 sideImg" src="assets/images/side.png" alt="Side" />
      </div>
      <div class="col-md-4 tab-70 sm-100 offset-md-1">
        <!-- form -->
        <div class="form">
          <h2 class="login-form form-title">User Registration</h2>

          <!-- register form -->
          <form id="registerForm" class="login-form" method="post">
            <div class="input-field">
              <input type="text" id="name" required />
              <label> Full Name </label>
            </div>
            <div class="input-field">
              <input type="text" id="username" required />
              <label> Username </label>
            </div>
            <div class="input-field">
              <input type="email" id="email" required />
              <label> Email </label>
            </div>
            <div class="input-field">
              <input type="password" id="password" required />
              <label> Password </label>
            </div>
            <div class="input-field">
              <input type="text" id="phone" />
              <label> Phone (optional) </label>
            </div>

            <div class="login-btn">
              <button type="submit" class="login">
                Register Account
              </button>
            </div>
          </form>
          <script>
            document.getElementById("registerForm").addEventListener("submit", async (e) => {
              e.preventDefault();

              const name = document.getElementById("name").value.trim();
              const username = document.getElementById("username").value.trim();
              const email = document.getElementById("email").value.trim();
              const password = document.getElementById("password").value.trim();
              const phone = document.getElementById("phone").value.trim();

              try {
                const res = await fetch("http://localhost:5000/api/auth/register", {
                  method: "POST",
                  headers: { "Content-Type": "application/json" },
                  body: JSON.stringify({ name, username, email, password, phone })
                });

                const data = await res.json();

                if (res.ok) {
                  // Optionally auto-login or redirect to login.html
                  alert("Registered successfully! Please login.");
                  window.location.href = "login.html";
                } else {
                  alert(data.msg || "Registration failed.");
                }
              } catch (err) {
                alert("Error connecting to server.");
                console.error(err);
              }
            });
          </script>

          <!-- login redirect -->
          <p class="mt-3 text-center">
            Already have an account?
            <a href="login.html">Login here</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- jQuery -->
<script src="assets/dist/lib/jQuery/jquery-3.7.1.min.js"></script>

<!-- Bootstrap JS -->
<script src="assets/dist/framework/bootstrap/js/bootstrap.min.js"></script>

<!-- Theme Files -->
<script src="assets/dist/theme/js/custom.js"></script>
</body>
</html>
